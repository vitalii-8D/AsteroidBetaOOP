(()=>{"use strict";var t,e={207:(t,e,i)=>{function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}var o=function(){function t(){n(this,t),this.down=new a,this.up=new a,this.left=new a,this.right=new a,this.spacebar=new a}return s(t,[{key:"keyDownUp",value:function(t){var e="keydown"===t.type;switch(t.keyCode){case 37:this.left.getInput(e);break;case 38:this.up.getInput(e);break;case 39:this.right.getInput(e);break;case 40:this.down.getInput(e);break;case 32:this.spacebar.getInput(e)}}}]),t}(),a=function(){function t(){n(this,t),this.active=void 0,this.down=void 0}return s(t,[{key:"getInput",value:function(t){this.down!==t&&(this.active=t),this.down=t}}]),t}();const h=o;var c="menu",u="game",l="game_over";function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.buffer=document.createElement("canvas").getContext("2d"),this.context=e.getContext("2d")}var e,i,n;return e=t,(i=[{key:"drawShip",value:function(t){var e=t.x,i=t.y,n=t.radius,r=t.angle,s=t.color,o=t.visible,a=t.is_dead,h=t.thrusting;this.drawHitbox(e,i,n),a?this.drawShipsExplosion(e,i,n):o&&(h&&this.drawThrusting(e,i,n,r),this.drawTriangle(e,i,n,r,s))}},{key:"drawLives",value:function(t,e){for(var i=0;i<t;i++){var n=10+e*(i+1)*2.4,r=20+e;this.drawTriangle(n,r,e,Math.PI/2,"white")}}},{key:"drawTriangle",value:function(t,e,i,n,r){this.buffer.strokeStyle=r,this.buffer.lineWidth=i/10,this.buffer.beginPath(),this.buffer.moveTo(t+4/3*i*Math.cos(n),e-4/3*i*Math.sin(n)),this.buffer.lineTo(t-i*(2/3*Math.cos(n)+Math.sin(n)),e+i*(2/3*Math.sin(n)-Math.cos(n))),this.buffer.lineTo(t-i*(2/3*Math.cos(n)-Math.sin(n)),e+i*(2/3*Math.sin(n)+Math.cos(n))),this.buffer.closePath(),this.buffer.stroke()}},{key:"drawThrusting",value:function(t,e,i,n){this.buffer.fillStyle="red",this.buffer.strokeStyle="yellow",this.buffer.lineWidth=i/20,this.buffer.beginPath(),this.buffer.moveTo(t-i*(2/3*Math.cos(n)+.4*Math.sin(n)),e+i*(2/3*Math.sin(n)-.4*Math.cos(n))),this.buffer.lineTo(t-1.5*i*Math.cos(n),e+1.5*i*Math.sin(n)),this.buffer.lineTo(t-i*(2/3*Math.cos(n)-.4*Math.sin(n)),e+i*(2/3*Math.sin(n)+.4*Math.cos(n))),this.buffer.closePath(),this.buffer.stroke(),this.buffer.fill()}},{key:"drawShipsExplosion",value:function(t,e,i){this.buffer.fillStyle="red",this.buffer.beginPath(),this.buffer.arc(t,e,i,0,2*Math.PI),this.buffer.closePath(),this.buffer.fill(),this.buffer.fillStyle="orange",this.buffer.beginPath(),this.buffer.arc(t,e,.65*i,0,2*Math.PI),this.buffer.closePath(),this.buffer.fill(),this.buffer.fillStyle="white",this.buffer.beginPath(),this.buffer.arc(t,e,.3*i,0,2*Math.PI),this.buffer.closePath(),this.buffer.fill()}},{key:"drawLasers",value:function(t){var e=this;t.length&&t.forEach((function(t){var i=t.x,n=t.y,r=t.radius,s=t.color;e.buffer.fillStyle=s,e.buffer.beginPath(),e.buffer.arc(i,n,r,0,2*Math.PI),e.buffer.closePath(),e.buffer.fill()}))}},{key:"drawAsteroid",value:function(t){var e=this;t.length&&t.forEach((function(t){var i=t.x,n=t.y,r=t.radius,s=t.vertices,o=t.irregularity,a=t.stroke_color;e.buffer.strokeStyle=a,e.buffer.lineWidth=r/10,e.buffer.beginPath(),e.buffer.moveTo(i+r*o[0],n);for(var h=2*Math.PI/s,c=0;c<s;c++)e.buffer.lineTo(i+r*o[c]*Math.cos(h*c),n-r*o[c]*Math.sin(h*c));e.buffer.closePath(),e.buffer.stroke(),e.drawHitbox(i,n,r)}))}},{key:"drawParticles",value:function(t){var e=t.coordinates,i=t.sizes,n=t.color;if(e.length){this.buffer.fillStyle=n;for(var r=0;r<e.length;r++)this.buffer.beginPath(),this.buffer.arc(e[r][0],e[r][1],i[r],0,2*Math.PI),this.buffer.closePath(),this.buffer.fill()}}},{key:"drawScore",value:function(t,e,i){var n=i/20;this.buffer.fillStyle="#eeeeee",this.buffer.font=n+"px serif",this.buffer.textAlign="left",this.buffer.fillText("Score: ".concat(t),i/3.5,n),this.buffer.fillText("HI: ".concat(e),2*i/3,n)}},{key:"drawHitbox",value:function(t,e,i){}},{key:"fill",value:function(t){this.buffer.fillStyle=t,this.buffer.fillRect(0,0,this.buffer.canvas.width,this.buffer.canvas.height)}},{key:"render",value:function(){this.context.drawImage(this.buffer.canvas,0,0,this.buffer.canvas.width,this.buffer.canvas.height,0,0,this.context.canvas.width,this.context.canvas.height)}},{key:"resize",value:function(t,e,i){e/t>i?(this.context.canvas.height=t*i,this.context.canvas.width=t):(this.context.canvas.height=e,this.context.canvas.width=e/i),this.context.imageSmoothingEnabled=!1}}])&&f(e.prototype,i),n&&f(e,n),t}();function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var v=function(t,e,i,n){var r=t-e,s=i-n;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))};const p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,(i=[{key:"checkCollisionBetween",value:function(t,e,i){if(Array.isArray(t)&&Array.isArray(e)){if(!t.length||!e.length)return!1;for(var n=0;n<t.length;n++)for(var r=t[n],s=r.x,o=r.y,a=r.radius,h=0;h<e.length;h++){var c=e[h],u=c.x,l=c.y,f=c.radius;if(v(s,u,o,l)<a+f)return i(t[n],n,e[h],h),!0}return!1}if(Array.isArray(t)){if(!t.length)return!1;for(var d=e.x,y=e.y,p=e.radius,m=0;m<t.length;m++){var b=t[m],g=b.x,_=b.y,w=b.radius;if(v(g,d,_,y)<w+p)return i(t[m],m,e),!0}return!1}if(Array.isArray(e)){if(!e.length)return!1;for(var k=t.x,x=t.y,M=t.radius,P=0;P<e.length;P++){var S=e[P],O=S.x,A=S.y,E=S.radius;if(v(k,O,x,A)<M+E)return i(t,e[P],P),!0}return!1}var j=t.x,T=t.y,C=t.radius,I=e.x,R=e.y,B=e.radius;return v(j,I,T,R)<C+B&&(i(t,e),!0)}}])&&y(e.prototype,i),n&&y(e,n),t}();i.p,i.p,i.p,i.p;function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var g=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;m(this,t),this.src=e,this.max=i,this.volume=n,this.stream_num=0,this.streams=[],this.init()}var e,i,n;return e=t,(i=[{key:"init",value:function(){for(var t=0;t<this.max;t++)this.streams.push(new Audio(this.src)),this.streams[t].volume=this.volume}},{key:"play",value:function(){this.stream_num=(this.stream_num+1)%this.max,this.streams[this.stream_num].play()}},{key:"stop",value:function(){this.streams[this.stream_num].pause(),this.streams[this.stream_num].currentTime=0}}])&&b(e.prototype,i),n&&b(e,n),t}(),_=new g("./hit.m4a",10,1),w=new g("./laser.m4a",10,1),k=new g("./explode.m4a",1,.3),x=new g("./thrust.m4a",1,.2);function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function S(t,e,i){return e&&P(t.prototype,e),i&&P(t,i),t}var O=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;M(this,t),this.color="#ffddff",this.radius=20,this.x=e,this.y=i,this.angle=.5*Math.PI,this.rotation=0,this.velocity_x=0,this.velocity_y=0,this.shooting_system=new A,this.thrusting=!1,this.visible=!0,this.blink_number=12,this.blink_time=Math.floor(6),this.is_dead=!1,this.death_timer=0}return S(t,[{key:"collideWithAsteroid",value:function(){this.blink_number>0||(x.stop(),this.thrusting=!1,k.play(),this.is_dead=!0,this.velocity_x=0,this.velocity_y=0,this.death_timer=90)}},{key:"accelerate",value:function(){this.velocity_x+=1*Math.cos(this.angle),this.velocity_y-=1*Math.sin(this.angle)}},{key:"shoot",value:function(){w.play(),this.shooting_system.emit(this.x,this.y,this.angle)}},{key:"update",value:function(){this.shooting_system.update(),this.death_timer>0?this.death_timer--:this.is_dead||(this.blink_number>0&&(this.blink_time--,0===this.blink_time&&(this.blink_number--,0===this.blink_number&&(this.visible=!1),this.blink_time=Math.floor(6),this.visible=!this.visible)),this.x+=this.velocity_x,this.y+=this.velocity_y,v(this.velocity_x,0,this.velocity_y,0)>4?(x.play(),this.thrusting=!0):(x.stop(),this.thrusting=!1),this.angle+=7*this.rotation*(2*Math.PI/360))}}]),t}(),A=function(){function t(){M(this,t),this.lasers=[],this.distance=0}return S(t,[{key:"emit",value:function(t,e,i){var n=new E(t,e,3,"#ff1111",i);this.lasers.push(n)}},{key:"update",value:function(){if(this.lasers.length)for(var t=this.lasers.length-1;t>=0;t--)this.lasers[t].update(),this.lasers[t].distance>500&&this.deleteLaser(t)}},{key:"deleteLaser",value:function(t){this.lasers.splice(t,1)}}]),t}(),E=function(){function t(e,i,n,r,s){M(this,t),this.radius=n,this.color=r,this.x=e+4/3*n*Math.cos(s),this.y=i-4/3*n*Math.sin(s),this.velocity_x=20*Math.cos(s),this.velocity_y=-20*Math.sin(s),this.distance=0}return S(t,[{key:"update",value:function(){this.x+=this.velocity_x,this.y+=this.velocity_y,this.distance+=v(this.velocity_x,0,this.velocity_y,0)}}]),t}();const j=O;function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var n,r,s=[],o=!0,a=!1;try{for(i=i.call(t);!(o=(n=i.next()).done)&&(s.push(n.value),!e||s.length!==e);o=!0);}catch(t){a=!0,r=t}finally{try{o||null==i.return||i.return()}finally{if(a)throw r}}return s}(t,e)||R(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t){return function(t){if(Array.isArray(t))return B(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||R(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){if(t){if("string"==typeof t)return B(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?B(t,e):void 0}}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function W(t,e,i){return e&&L(t.prototype,e),i&&L(t,i),t}function q(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=D(t);if(e){var r=D(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return N(this,i)}}function N(t,e){return!e||"object"!==T(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var U,V,Y,$=function(t){q(i,t);var e=H(i);function i(t,n){var r;return F(this,i),(r=e.call(this)).stroke_color="#eeddee",r.x=t,r.y=n,r.velocity_x=2.5*(2*Math.random()-1),r.velocity_y=2.5*(2*Math.random()-1),r.vertices=void 0,r.irregularity=[],r.init(),r}return W(i,[{key:"init",value:function(){this.vertices=Math.floor(11*Math.random()+5);for(var t=0;t<this.vertices;t++){var e=.8*Math.random()*1,i=Math.random()*e-e/3+1;this.irregularity.push(i)}}},{key:"update",value:function(){this.x+=this.velocity_x,this.y+=this.velocity_y}}]),i}(p),G=function(t){q(i,t);var e=H(i);function i(t,n){var r;return F(this,i),(r=e.call(this,t,n)).radius=15,r.points=500,r}return i}($),J=function(t){q(i,t);var e=H(i);function i(t,n){var r;return F(this,i),(r=e.call(this,t,n)).radius=25,r.points=300,r}return i}($),K=function(t){q(i,t);var e=H(i);function i(t,n){var r;return F(this,i),(r=e.call(this,t,n)).radius=40,r.points=100,r}return i}($),Q=function(){function t(){F(this,t)}return W(t,[{key:"create",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"small",r=t.list[n]||t.list.small,s=new r(e,i);return s.type=n,s}},{key:"collapse",value:function(t,e,i){return"medium"===i?[this.create(t,e),this.create(t,e)]:"large"===i?[this.create(t,e,"medium"),this.create(t,e,"medium")]:void 0}},{key:"random",value:function(t,e){var i=Math.random(),n=void 0;return n=i<.35?"large":i>.55?"medium":"small",this.create(t,e,n)}}]),t}();Y={small:G,medium:J,large:K},(V="list")in(U=Q)?Object.defineProperty(U,V,{value:Y,enumerable:!0,configurable:!0,writable:!0}):U[V]=Y;var X=function(t,e){var i,n;return 2*Math.random()<1?(i=2*Math.random()<1?-40:t+40,n=Math.random()*e):(i=Math.random()*t,n=2*Math.random()<1?-40:e+40),[i,n]},Z=function(){function t(e,i){F(this,t),this.game_width=e,this.game_height=i,this.asteroids=[],this.asteroidsFactory=new Q}return W(t,[{key:"init",value:function(){for(var t=this.game_width/2,e=this.game_height/2,i=0;i<5;i++){var n=t,r=e;do{n=Math.floor(Math.random()*this.game_width),r=Math.floor(Math.random()*this.game_height)}while(v(t,n,e,r)<250);var s=this.asteroidsFactory.random(n,r);this.asteroids.push(s)}}},{key:"hitAsteroid",value:function(t,e){if(_.play(),"small"!==t.type){var i,n=this.asteroidsFactory.collapse(t.x,t.y,t.type);(i=this.asteroids).push.apply(i,I(n))}this.deleteAsteroid(e)}},{key:"deleteAsteroid",value:function(t){this.asteroids.splice(t,1)}},{key:"createRandomAsteroid",value:function(){var t=C(X(this.game_width,this.game_height),2),e=t[0],i=t[1],n=this.asteroidsFactory.random(e,i);this.asteroids.push(n)}},{key:"addAsteroidsForDemo",value:function(){for(var t=0;t<30;t++){var e=C(X(this.game_width,this.game_height),2),i=e[0],n=e[1],r=this.asteroidsFactory.random(i,n);this.asteroids.push(r)}}},{key:"update",value:function(){this.asteroids.forEach((function(t){t.update()}))}}]),t}();new Q;const tt=Z;function et(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const it=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color="orange",this.number=10,this.max_distance=100,this.max_distances=[],this.coordinates=[],this.velocities=[],this.distances=[],this.sizes=[]}var e,i,n;return e=t,(i=[{key:"emit",value:function(t,e){for(var i=0;i<this.number;i++)this.coordinates.push([t,e]),this.velocities.push([10*(2*Math.random()-1),10*(2*Math.random()-1)]),this.max_distances.push(Math.random()*(this.max_distance-.4*this.max_distance)+.4*this.max_distance),this.distances.push(0),this.sizes.push(Math.random()<.2?3:Math.random()<.4?Math.ceil(3*.6):Math.ceil(3*.3))}},{key:"update",value:function(){if(this.coordinates.length)for(var t=this.coordinates.length-1;t>=0;t--)this.coordinates[t][0]+=this.velocities[t][0],this.coordinates[t][1]+=this.velocities[t][1],this.distances[t]+=Math.sqrt(Math.pow(this.velocities[t][0],2)+Math.pow(this.velocities[t][1],2)),this.distances[t]>=this.max_distances[t]&&(this.coordinates.splice(t,1),this.max_distances.splice(t,1),this.velocities.splice(t,1),this.distances.splice(t,1),this.sizes.splice(t,1))}}])&&et(e.prototype,i),n&&et(e,n),t}();function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function st(t,e){return(st=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ht(t);if(e){var r=ht(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return at(this,i)}}function at(t,e){return!e||"object"!==nt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ht(t){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&st(t,e)}(s,t);var e,i,n,r=ot(s);function s(t,e){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(i=r.call(this)).background_color="rgba(20, 20, 20, 1)",i.friction=.95,i.ship=void 0,i.lives=3,i.explode_particles=new it,i.width=t,i.height=e,i.counter=0,i.score=0,i.asteroid_belt=new tt(t,e),i.init(),i}return e=s,(i=[{key:"init",value:function(){this.ship=new j(this.width/2,this.height/2),this.asteroid_belt.init()}},{key:"update",value:function(){this.ship.update(),this.asteroid_belt.update(),this.explode_particles.update(),this.ship.is_dead&&0===this.ship.death_timer&&0!==this.lives?this.resetShip():(this.ship.velocity_x*=this.friction,this.ship.velocity_y*=this.friction,this.checkAllCollisions())}},{key:"collideWorldBounds",value:function(t){var e=t.radius/2;t.x+e<0?t.x=this.width+e:t.x-e>this.width&&(t.x=-e),t.y+e<0?t.y=this.height+e:t.y-e>this.height&&(t.y=-e)}},{key:"resetShip",value:function(){this.lives--,0!==this.lives&&(this.ship=new j(this.width/2,this.height/2))}},{key:"checkAllCollisions",value:function(){var t=this;this.asteroid_belt.asteroids.forEach((function(e){t.collideWorldBounds(e)})),0!==this.lives&&(this.collideWorldBounds(this.ship),this.ship.blink_number||this.ship.is_dead||this.checkCollisionBetween(this.ship,this.asteroid_belt.asteroids,(function(e,i,n){t.score+=i.points,t.counter+=i.points,t.checkForAddingAsteroid(),t.ship.collideWithAsteroid(),t.asteroid_belt.hitAsteroid(i,n),t.explode_particles.emit(i.x,i.y)})),this.checkCollisionBetween(this.asteroid_belt.asteroids,this.ship.shooting_system.lasers,(function(e,i,n,r){t.score+=e.points,t.counter+=e.points,t.checkForAddingAsteroid(),t.asteroid_belt.hitAsteroid(e,i),t.ship.shooting_system.deleteLaser(r),t.explode_particles.emit(e.x,e.y)})),this.ship.shooting_system.lasers.forEach((function(e){t.collideWorldBounds(e)})))}},{key:"checkForAddingAsteroid",value:function(){this.counter>800&&(this.counter-=800,this.asteroid_belt.createRandomAsteroid())}}])&&rt(e.prototype,i),n&&rt(e,n),s}(p);var ut=i(8007);window.React=ut;const lt=ut;function ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const vt=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:700,r=arguments.length>2?arguments[2]:void 0;ft(this,t),yt(this,"start_game",(function(){e.scene=new ct(e.width,e.height),e.start_page.style.display="none",e.game_over_page.style.display="none",e.state=u})),this.width=i,this.height=n,this.scene=new ct(this.width,this.height),this.state=c,this.hi_score=localStorage.getItem("hi-score")||0,this.container=r,this.start_page=void 0,this.game_over_page=void 0,this.init()}var e,i,n;return e=t,(i=[{key:"init",value:function(){var t;this.scene.asteroid_belt.addAsteroidsForDemo(),this.start_page=(t=this.start_game,lt.createElement("div",{className:"container",style:""},lt.createElement("h1",{style:"margin-bottom: 50px;"},"Welcome to Asteroids game"),lt.createElement("button",{className:"btn",onClick:t,style:"background-color: green; color: #dddddd"},"Start"),lt.createElement("p",{style:"position: absolute; bottom: 50px;"},"Created by Vitalii Shlomenko"))),this.game_over_page=function(t){return lt.createElement("div",{className:"container",style:""},lt.createElement("h1",{style:"margin-bottom: 10px;"},"You lose! One more try?"),lt.createElement("div",{className:"score",style:"margin-bottom: 40px; font-size: 24px;"},"score"),lt.createElement("button",{className:"btn",onClick:t,style:"background-color: green; color: #dddddd"},"Retry"),lt.createElement("p",{style:"position: absolute; bottom: 50px;"},"Created by Vitalii Shlomenko"))}(this.start_game),this.container.appendChild(this.start_page),this.container.appendChild(this.game_over_page),this.game_over_page.style.display="none"}},{key:"update",value:function(t){0===this.scene.lives&&this.state===u&&(this.state=l,this.scene.score>this.hi_score&&(this.hi_score=this.scene.score,localStorage.setItem("hi-score",this.hi_score.toString())),this.game_over_page.querySelector("div.score").innerHTML="Current score: ".concat(this.scene.score),this.game_over_page.style.display="flex"),this.scene.update(t)}}])&&dt(e.prototype,i),n&&dt(e,n),t}();function pt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const mt=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.accumulated_time=void 0,this.animation_frame_request=void 0,this.time=void 0,this.time_step=e,this.updated=void 0,this.update=i,this.render=n}var e,i,n;return e=t,(i=[{key:"loop",value:function(t){var e=this;for(this.accumulated_time+=t-this.time,this.time=t,this.accumulated_time>3*this.time_step&&(this.accumulated_time=this.time_step);this.accumulated_time>=this.time_step;)this.accumulated_time-=this.time_step,this.update(this.time_step),this.updated=!0;this.updated&&(this.render(),this.updated=!1),window.requestAnimationFrame((function(t){return e.loop(t)}))}},{key:"start",value:function(){var t=this;this.accumulated_time=this.time_step,this.time=window.performance.now(),this.animation_frame_request=window.requestAnimationFrame((function(e){return t.loop(e)}))}},{key:"stop",value:function(){window.cancelAnimationFrame(this.animation_frame_request)}}])&&pt(e.prototype,i),n&&pt(e,n),t}();window.addEventListener("load",(function(){var t=function(t){i.keyDownUp(t)},e=function(t){n.resize(document.documentElement.clientWidth-32,document.documentElement.clientHeight-32,r.height/r.width),n.render()};var i=new h,n=new d(document.getElementById("canvas")),r=new vt(1e3,700,document.getElementById("container")),s=new mt(1e3/30,(function(t){r.state!==u||r.scene.ship.is_dead||function(){i.left.active&&(r.scene.ship.rotation=1);i.right.active&&(r.scene.ship.rotation=-1);i.left.active||i.right.active||(r.scene.ship.rotation=0);i.up.active&&r.scene.ship.accelerate();i.spacebar.active&&(r.scene.ship.shoot(),i.spacebar.active=!1)}(),r.update(t)}),(function(){n.fill(r.scene.background_color),n.drawLasers(r.scene.ship.shooting_system.lasers),n.drawAsteroid(r.scene.asteroid_belt.asteroids),n.drawShip(r.scene.ship),n.drawParticles(r.scene.explode_particles),n.drawLives(r.scene.lives,r.scene.ship.radius),n.drawScore(r.scene.score,r.hi_score,r.width),n.render()}));n.buffer.canvas.width=r.width,n.buffer.canvas.height=r.height,window.addEventListener("resize",e),window.addEventListener("keydown",t),window.addEventListener("keyup",t),e(),s.start()}))}},i={};function n(t){var r=i[t];if(void 0!==r)return r.exports;var s=i[t]={exports:{}};return e[t](s,s.exports,n),s.exports}n.m=e,t=[],n.O=(e,i,r,s)=>{if(!i){var o=1/0;for(u=0;u<t.length;u++){for(var[i,r,s]=t[u],a=!0,h=0;h<i.length;h++)(!1&s||o>=s)&&Object.keys(n.O).every((t=>n.O[t](i[h])))?i.splice(h--,1):(a=!1,s<o&&(o=s));if(a){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[i,r,s]},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="",(()=>{var t={179:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var r,s,[o,a,h]=i,c=0;for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(h)var u=h(n);for(e&&e(i);c<o.length;c++)s=o[c],n.o(t,s)&&t[s]&&t[s][0](),t[o[c]]=0;return n.O(u)},i=self.webpackChunkasteroids_game=self.webpackChunkasteroids_game||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),n.O(void 0,[216],(()=>n(6981)));var r=n.O(void 0,[216],(()=>n(207)));r=n.O(r)})();
//# sourceMappingURL=main.bundle.js.map